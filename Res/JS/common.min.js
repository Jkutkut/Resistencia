/**
 * Code generated using Code style converter.
 * @author Jkutkut
 * @see https://github.com/Jkutkut/PY_Code-style-converter
 */

var DB={players:null,playersPos:null,missions:null,opinion:null,missionTeam:null};var queryString=new Array();getQuerry(); resizeTextSize(); $(window).resize(resizeTextSize); function resizeTextSize(){let size=$("body").css("height"); size=Number.parseInt(size.substr(0,size.length-2)/50); let textSize=[["huge",3.5],["bigger",3],["big",2.5],["normal",2],["small",1.5],["detail",1]];for (let e of textSize){$(":root").css(`--${e[0]}Text`,`${e[1]*size}px`);}console.log("Screen resized");}function changeBackground(resistencia,chunguitos){if (typeof resistencia!="number" || typeof chunguitos!="number"){throw new Error("The arguments must be numbers");}if (resistencia < 0 || chunguitos < 0){throw new Error("The arguments must be positive");}if (resistencia >=3){$("body").css("background","var(--blue)");}else if (chunguitos >=3){$("body").css("background","var(--red)");}else{const intensidad={resistencia:[5,15,30],chunguitos:[90,70,55]};$("body").css("background",`linear-gradient(180deg,var(--blue) ${intensidad.resistencia[resistencia]}%,var(--red) ${intensidad.chunguitos[chunguitos]}%)`);}}function getQuerry(){if (queryString.length==0){if (window.location.search.split('?').length > 1){var params=window.location.search.split('?')[1].split('&');for (let i=0; i < params.length; i++){let d=params[i].split('='); queryString[d[0]]=decodeURIComponent(d[1]);}if (queryString.username &&!queryString.pId){console.warn("pId not selected");$.ajax({url:"getpId",method:"get",data:{username:queryString.username},success:function(data){console.log("pId recovered: "+data);queryString["pId"]=parseInt(data);}});}}}}function go2page(url,extraData={}){let extra=[];for (const v of Object.entries(queryString)){extra.push(v.join("="))}for (const v of Object.entries(extraData)){extra.push(v.join("="))}window.location.href=url+"?"+extra.join("&");};var lastTime=0;function getDB(successF,failF){$.ajax({url:"getDB",method:"get",data:{lastTime:lastTime},success:(data)=>{if (data.lastTime > lastTime){lastTime=data.lastTime; DB.players=data.players; DB.missions=data.missions;DB.missionTeam=data.missionTeam;DB.opinion=data.opinion;successF(data);}},error:(e)=>{DB.players=debugPlayers;DB.missions=debugMissions;DB.missionTeam=[];DB.opinion=[];failF(e);}});};const sleep=async (ms)=>{return new Promise(resolve=> setTimeout(resolve,ms));};const asyncInterval=async (petition,spected,ms,triesLeft=10000)=>{return new Promise((resolve,reject)=>{const interval=setInterval(async ()=>{if (await $.ajax(petition)==spected){resolve();clearInterval(interval);}else if (triesLeft <=1){reject();clearInterval(interval);}triesLeft--;},ms);});};function stillIn(e,p,conversion=true){if (conversion){e=div2disposition(e);p=div2disposition(p);}return!(e.x < p.x || e.y < p.y ||e.x+e.w > p.x+p.w || e.y+e.h > p.y+p.h);}function isInt(str){if (typeof str!="string"){return false;}return!isNaN(str) &&!isNaN(parseInt(str));}function getBase64Image(img){var canvas=document.createElement("canvas");canvas.width=img.width;canvas.height=img.height;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0);var dataURL=canvas.toDataURL("image/png");return dataURL;}function pixel2float(p){return parseFloat(p.substring(0,p.length-2));}const debugPlayers=[{"pId":1,"name":"jorge","groupPos":1,"pType":0},{"pId":2,"name":"paula","groupPos":2,"pType":0},{"pId":3,"name":"ana","groupPos":3,"pType":1},{"pId":4,"name":"adri","groupPos":4,"pType":0},{"pId":5,"name":"laura","groupPos":5,"pType":1},{"pId":6,"name":"Juan","groupPos":6,"pType":0},{"pId":7,"name":"Pepa","groupPos":7,"pType":0},{"pId":8,"name":"Esmeralda","groupPos":8,"pType":0},{"pId":9,"name":"Luis","groupPos":9,"pType":0},{"pId":10,"name":"Paco","groupPos":10,"pType":0}];var debugMissions=[{mId:1,active:false,leaderId:3,vYes:4,vNo:1,mRes:1},{mId:2,active:false,leaderId:4,vYes:5,vNo:2,mRes:0},{mId:3,active:true,leaderId:5,vYes:null,vYes:null,mRes:0},{mId:4,active:false,leaderId:6,vYes:null,vNo:null,mRes:0},{mId:5,active:false,leaderId:null,vYes:null,vNo:null,mRes:0}];var debugOpinion=[{"pId":1,"val":1},{"pId":2,"val":1},{"pId":3,"val":1},{"pId":4,"val":1},{"pId":5,"val":1},{"pId":6,"val":1},{"pId":7,"val":1},{"pId":8,"val":1},{"pId":9,"val":1},{"pId":10,"val":1}];